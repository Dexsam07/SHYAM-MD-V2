<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Bot Session Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-white flex items-center justify-center min-h-screen">
    <div class="p-8 bg-slate-800 rounded-xl shadow-xl w-full max-w-md text-center">
        <h2 class="text-2xl font-bold mb-6">Link Your WhatsApp</h2>
        <input id="phone" type="text" placeholder="919876543210" class="w-full p-3 rounded bg-slate-700 mb-4 border border-slate-600">
        <button onclick="getPairingCode()" class="w-full bg-blue-600 p-3 rounded font-bold hover:bg-blue-700">Get Pairing Code</button>
        
        <div id="displayCode" class="mt-6 text-4xl font-mono tracking-widest text-yellow-400 hidden">
            </div>
    </div>

    <script>
        async function getPairingCode() {
            const phone = document.getElementById('phone').value;
            const display = document.getElementById('displayCode');
            display.innerText = "Generating...";
            display.classList.remove('hidden');

            const res = await fetch(`/pair?phone=${phone}`);
            const data = await res.json();
            
            if(data.code) {
                display.innerText = data.code;
            } else {
                display.innerText = "Error!";
            }
        }
    </script>
</body>
</html>
